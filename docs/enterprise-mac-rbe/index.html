<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BuildBuddy Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BuildBuddy Blog Atom Feed"><title data-react-helmet="true">Enterprise Mac RBE Setup | BuildBuddy</title><meta data-react-helmet="true" property="og:url" content="https://docs.buildbuddy.io/docs/enterprise-mac-rbe"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Enterprise Mac RBE Setup | BuildBuddy"><meta data-react-helmet="true" name="description" content="Deploying Mac executors requires a little extra love since the deployment process can&#x27;t easily be automated via Kubernetes."><meta data-react-helmet="true" property="og:description" content="Deploying Mac executors requires a little extra love since the deployment process can&#x27;t easily be automated via Kubernetes."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_black.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.buildbuddy.io/docs/enterprise-mac-rbe"><link data-react-helmet="true" rel="alternate" href="https://docs.buildbuddy.io/docs/enterprise-mac-rbe" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.buildbuddy.io/docs/enterprise-mac-rbe" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3d55f6d3.css">
<link rel="preload" href="/assets/js/styles.99ff62e2.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.fb523e5f.js" as="script">
<link rel="preload" href="/assets/js/main.6a7acce9.js" as="script">
<link rel="preload" href="/assets/js/1.af4f1695.js" as="script">
<link rel="preload" href="/assets/js/2.188d4042.js" as="script">
<link rel="preload" href="/assets/js/3.98ab277b.js" as="script">
<link rel="preload" href="/assets/js/1be78505.31ec347f.js" as="script">
<link rel="preload" href="/assets/js/56.4a323b8d.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.52920a53.js" as="script">
<link rel="preload" href="/assets/js/17896441.47f4e99e.js" as="script">
<link rel="preload" href="/assets/js/58bb0baf.3f6c3c46.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.buildbuddy.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://docs.buildbuddy.io/docs/introduction/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs</a><a href="https://buildbuddy.io/faq" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">FAQs</a><a href="https://github.com/buildbuddy-io/buildbuddy" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a></div><div class="navbar__items navbar__items--right"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="sign-up">Sign Up</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT"> </span></div><div class="react-toggle-track-x"><span class="toggle_71bT"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.buildbuddy.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://docs.buildbuddy.io/docs/introduction/" target="_blank" rel="noopener noreferrer" class="menu__link">Docs</a></li><li class="menu__list-item"><a href="https://buildbuddy.io/faq" target="_self" rel="noopener noreferrer" class="menu__link">FAQs</a></li><li class="menu__list-item"><a href="https://github.com/buildbuddy-io/buildbuddy" target="_self" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="menu__link">Pricing</a></li><li class="menu__list-item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="menu__link">Login</a></li><li class="menu__list-item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="menu__link" class="sign-up">Sign Up</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cloud">Cloud Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/on-prem">On-prem Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides">Guides</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-auth">Authentication Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-metadata">Build Metadata Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Remote Build Execution</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/remote-build-execution">Remote Build Execution</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-setup">Remote Build Execution Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-platforms">RBE Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-github-actions">RBE with GitHub Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-pools">RBE Executor Pools</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting-rbe">RBE Failures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting-slow-upload">Slow Uploads</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Enterprise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise">BuildBuddy Enterprise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-setup">Enterprise On-prem Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-config">Enterprise Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-helm">Enterprise Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-rbe">Enterprise RBE Setup</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/enterprise-mac-rbe">Enterprise Mac RBE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-api">Enterprise API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/prometheus-metrics">Prometheus Metrics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-samples">Samples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-app">App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-database">Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-ssl">SSL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-auth">Auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-integrations">Integrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-org">Org</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-rbe">RBE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-misc">Misc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-telemetry">Telemetry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-flags">Flags</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Enterprise Mac RBE Setup</h1></header><div class="markdown"><p>Deploying Mac executors requires a little extra love since the deployment process can&#x27;t easily be automated via Kubernetes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deploying-a-buildbuddy-cluster"></a>Deploying a BuildBuddy cluster<a class="hash-link" href="#deploying-a-buildbuddy-cluster" title="Direct link to heading">#</a></h2><p>First you&#x27;ll need to deploy the BuildBuddy app which serves the BuildBuddy UI, acts as a scheduler, and handles caching - which we still recommend deploying to a Linux Kubernetes cluster. </p><p>You can follow the standard <a href="/docs/enterprise-rbe">Enterprise RBE Setup</a> instructions to get your cluster up and running.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mac-environment-setup"></a>Mac environment setup<a class="hash-link" href="#mac-environment-setup" title="Direct link to heading">#</a></h2><p>Once you have a BuildBuddy cluster deployed with RBE enabled, you can start setting up your Mac executors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="downloading-xcode"></a>Downloading Xcode<a class="hash-link" href="#downloading-xcode" title="Direct link to heading">#</a></h3><p>When starting with a clean Mac, you&#x27;ll first need to make sure Xcode is installed. You can download Xcode from <a href="https://developer.apple.com/download/more/" target="_blank" rel="noopener noreferrer">Apple&#x27;s Developer Website</a> (you&#x27;ll need an Apple Developer account).</p><p>We recommend installing at least Xcode 12.2 (which is the default Xcode version used if no <code>--xcode_version</code> Bazel flag is specified).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If installing on many machines, we recommend downloading the Xcode .xip file to a location you control (like a cloud storage bucket) and downloading from there using a simple curl command. This reduces the number of times you have to login to your Apple Developer account.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="installing-xcode"></a>Installing Xcode<a class="hash-link" href="#installing-xcode" title="Direct link to heading">#</a></h3><p>Once your .xip file is downloaded, you can expand it with the following command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">xip --expand Xcode_12.2.xip</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can then move it to your <code>Applications</code> directory with the version number as a suffix (so multiple Xcode versions can be installed together and selected between using the <code>--xcode_version</code> Bazel flag).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mv Xcode.app /Applications/Xcode_12.2.app</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If this is the first Xcode version you&#x27;re installing, you&#x27;ll want to select it as your default Xcode version with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo xcode-select -s /Applications/Xcode_12.2.app</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can then accept the license with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo xcodebuild -license accept</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>And run the &quot;first launch&quot; with</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo xcodebuild -runFirstLaunch</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="installing-homebrew"></a>Installing Homebrew<a class="hash-link" href="#installing-homebrew" title="Direct link to heading">#</a></h3><p>You&#x27;ll likely want to install <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew</a> on your fresh executor to make installing other software easier. You can install it with the following line:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="installing-the-buildbuddy-mac-executor"></a>Installing the BuildBuddy Mac executor<a class="hash-link" href="#installing-the-buildbuddy-mac-executor" title="Direct link to heading">#</a></h2><p>Now that the environment is configured, we can download and install the BuildBuddy Mac executor.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="download-the-buildbuddy-executor"></a>Download the BuildBuddy executor<a class="hash-link" href="#download-the-buildbuddy-executor" title="Direct link to heading">#</a></h3><p>The latest BuildBuddy executor binary can be downloaded with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -fSL https://storage.googleapis.com/buildbuddy-tools/binaries/buildbuddy-executor -o buildbuddy-executor</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="make-the-executor-executable"></a>Make the executor executable<a class="hash-link" href="#make-the-executor-executable" title="Direct link to heading">#</a></h3><p>In order to run the executor binary, we must first make it executable with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x buildbuddy-executor</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-directories"></a>Create directories<a class="hash-link" href="#create-directories" title="Direct link to heading">#</a></h3><p>If you don&#x27;t already have any launch agents installed, you&#x27;ll need to make sure the <code>~/Library/LaunchAgents/</code> directory exits with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p ~/Library/LaunchAgents/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You&#x27;ll also need a directory to store the executor&#x27;s disk cache and execution roots. We recommend <em>avoiding</em> using the <code>/tmp</code> directory since this is periodically cleaned up.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p buildbuddy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-config-file"></a>Create config file<a class="hash-link" href="#create-config-file" title="Direct link to heading">#</a></h3><p>You&#x27;ll need to create a <code>config.yaml</code> with the following contents:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">executor:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  root_directory: &quot;/Users/YOUR_USERNAME/buildbuddy/remote_build&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  app_target: &quot;grpcs://YOUR_BUILDBUDDY_CLUSTER_URL:443&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  local_cache_directory: &quot;/Users/YOUR_USERNAME/buildbuddy/filecache&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  local_cache_size_bytes: 100000000000  # 100GB</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Make sure to replace <em>YOUR_USERNAME</em> with your Mac username and <em>YOUR_BUILDBUDDY_CLUSTER_URL</em> with the grpc url the BuildBuddy cluster you deployed. If you deployed the cluster without an NGINX Ingress, you&#x27;ll need to update the protocol to grpc:// and the port to 1985.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-launch-agent-plist-file"></a>Create a Launch Agent .plist file<a class="hash-link" href="#create-a-launch-agent-plist-file" title="Direct link to heading">#</a></h3><p>Now that everything is in place, we can create a LaunchAgent .plist file that tells Mac OS to keep the executor binary running on launch, and restart it if ever stops.</p><p>Make sure to replace <em>YOUR_USERNAME</em> with your Mac username and <em>YOUR_MACS_NETWORK_ADDRESS</em> with the IP address or DNS name of the Mac.</p><p>You can place this file in <code>~/Library/LaunchAgents/buildbuddy-executor.plist</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!DOCTYPE plist PUBLIC \&quot;-//Apple//DTD PLIST 1.0//EN\&quot; \&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd\&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;plist version=\&quot;1.0\&quot;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dict&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;Label&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;string&gt;buildbuddy-executor&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;EnvironmentVariables&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;dict&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;key&gt;MY_HOSTNAME&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;string&gt;YOUR_MACS_NETWORK_ADDRESS&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;key&gt;MY_POOL&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;string&gt;&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/dict&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;WorkingDirectory&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;string&gt;/Users/YOUR_USERNAME&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;ProgramArguments&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;array&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;string&gt;./buildbuddy-executor&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;string&gt;--config_file&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;string&gt;config.yaml&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/array&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;KeepAlive&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;true/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;RunAtLoad&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;true/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;StandardErrorPath&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;string&gt;/Users/YOUR_USERNAME/buildbuddy_stderr.log&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;key&gt;StandardOutPath&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;string&gt;/Users/YOUR_USERNAME/buildbuddy_stdout.log&lt;/string&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dict&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/plist&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="update-launch-agent-plist-permissions"></a>Update Launch Agent plist permissions<a class="hash-link" href="#update-launch-agent-plist-permissions" title="Direct link to heading">#</a></h3><p>You may need to update the file&#x27;s permissions with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chmod 600 ~/Library/LaunchAgents/buildbuddy-executor.plist</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="start-the-launch-agent"></a>Start the Launch Agent<a class="hash-link" href="#start-the-launch-agent" title="Direct link to heading">#</a></h3><p>You can load the Launch Agent with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">launchctl load ~/Library/LaunchAgents/buildbuddy-executor.plist</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>And start it with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">launchctl start buildbuddy-executor</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="verify-installation"></a>Verify installation<a class="hash-link" href="#verify-installation" title="Direct link to heading">#</a></h3><p>You can verify that your BuildBuddy Executor successfully connected to the cluster by live tailing the stdout file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tail -f buildbuddy_stdout.log</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optional-setup"></a>Optional setup<a class="hash-link" href="#optional-setup" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optional-enable-autologin"></a>Optional: Enable Autologin<a class="hash-link" href="#optional-enable-autologin" title="Direct link to heading">#</a></h3><p>If your Mac executor restarts for whatever reason, you&#x27;ll likely want to enable auto login so the executor will reconnect after rebooting instead of getting stuck on a login screen.</p><p>There&#x27;s a convenient <code>brew</code> package called <code>kcpassword</code> that makes this easy.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">brew tap xfreebird/utils</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">brew install kcpassword</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo enable_autologin &quot;MY_USER&quot; &quot;MY_PASSWORD&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optional-install-java"></a>Optional: Install Java<a class="hash-link" href="#optional-install-java" title="Direct link to heading">#</a></h3><p>If you&#x27;re doing a lot of Java builds on your Mac executors that are not fully hermetic (i.e. rely on the system installed Java rather than the remote Java SDK shipped by Bazel), you can install the JDK with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">brew install --cask adoptopenjdk</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/enterprise-mac-rbe.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/enterprise-rbe"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Enterprise RBE Setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/enterprise-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Documentation »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deploying-a-buildbuddy-cluster" class="table-of-contents__link">Deploying a BuildBuddy cluster</a></li><li><a href="#mac-environment-setup" class="table-of-contents__link">Mac environment setup</a><ul><li><a href="#downloading-xcode" class="table-of-contents__link">Downloading Xcode</a></li><li><a href="#installing-xcode" class="table-of-contents__link">Installing Xcode</a></li><li><a href="#installing-homebrew" class="table-of-contents__link">Installing Homebrew</a></li></ul></li><li><a href="#installing-the-buildbuddy-mac-executor" class="table-of-contents__link">Installing the BuildBuddy Mac executor</a><ul><li><a href="#download-the-buildbuddy-executor" class="table-of-contents__link">Download the BuildBuddy executor</a></li><li><a href="#make-the-executor-executable" class="table-of-contents__link">Make the executor executable</a></li><li><a href="#create-directories" class="table-of-contents__link">Create directories</a></li><li><a href="#create-config-file" class="table-of-contents__link">Create config file</a></li><li><a href="#create-a-launch-agent-plist-file" class="table-of-contents__link">Create a Launch Agent .plist file</a></li><li><a href="#update-launch-agent-plist-permissions" class="table-of-contents__link">Update Launch Agent plist permissions</a></li><li><a href="#start-the-launch-agent" class="table-of-contents__link">Start the Launch Agent</a></li><li><a href="#verify-installation" class="table-of-contents__link">Verify installation</a></li></ul></li><li><a href="#optional-setup" class="table-of-contents__link">Optional setup</a><ul><li><a href="#optional-enable-autologin" class="table-of-contents__link">Optional: Enable Autologin</a></li><li><a href="#optional-install-java" class="table-of-contents__link">Optional: Install Java</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.buildbuddy.io/"><img src="/img/logo_white.svg" class="footer-logo"></a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Product</h4><ul class="footer__items"><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Get Started</a></li><li class="footer__item"><a href="https://docs.buildbuddy.io/docs/introduction/" target="_self" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="footer__link-item">Pricing</a></li><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Login</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/privacy" target="_self" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/terms" target="_self" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.buildbuddy.io/blog/" target="_self" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io/buildbuddy/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report an Issue</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/contact" target="_self" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/team" target="_self" rel="noopener noreferrer" class="footer__link-item">Our Team</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/careers" target="_self" rel="noopener noreferrer" class="footer__link-item">Careers</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Security</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.buildbuddy.io/security" target="_self" rel="noopener noreferrer" class="footer__link-item">Security Overview</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/security-updates" target="_self" rel="noopener noreferrer" class="footer__link-item">Security Updates</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/security-vulnerability-report" target="_self" rel="noopener noreferrer" class="footer__link-item">Report a Vulnerability</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Connect</h4><ul class="footer__items"><li class="footer__item"><a href="http://slack.buildbuddy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/buildbuddy_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="http://linkedin.com/company/buildbuddy" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2021 Iteration, Inc.</div></div></div></footer></div>
<script src="/assets/js/styles.99ff62e2.js"></script>
<script src="/assets/js/runtime~main.fb523e5f.js"></script>
<script src="/assets/js/main.6a7acce9.js"></script>
<script src="/assets/js/1.af4f1695.js"></script>
<script src="/assets/js/2.188d4042.js"></script>
<script src="/assets/js/3.98ab277b.js"></script>
<script src="/assets/js/1be78505.31ec347f.js"></script>
<script src="/assets/js/56.4a323b8d.js"></script>
<script src="/assets/js/935f2afb.52920a53.js"></script>
<script src="/assets/js/17896441.47f4e99e.js"></script>
<script src="/assets/js/58bb0baf.3f6c3c46.js"></script>
</body>
</html>