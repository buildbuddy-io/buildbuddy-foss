<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BuildBuddy Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BuildBuddy Blog Atom Feed"><title data-react-helmet="true">Prometheus Metrics | BuildBuddy</title><meta data-react-helmet="true" property="og:url" content="https://docs.buildbuddy.io/docs/prometheus-metrics"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Prometheus Metrics | BuildBuddy"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_black.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.buildbuddy.io/docs/prometheus-metrics"><link data-react-helmet="true" rel="alternate" href="https://docs.buildbuddy.io/docs/prometheus-metrics" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.buildbuddy.io/docs/prometheus-metrics" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3d55f6d3.css">
<link rel="preload" href="/assets/js/styles.99ff62e2.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.fb523e5f.js" as="script">
<link rel="preload" href="/assets/js/main.6a7acce9.js" as="script">
<link rel="preload" href="/assets/js/1.af4f1695.js" as="script">
<link rel="preload" href="/assets/js/2.188d4042.js" as="script">
<link rel="preload" href="/assets/js/3.98ab277b.js" as="script">
<link rel="preload" href="/assets/js/1be78505.31ec347f.js" as="script">
<link rel="preload" href="/assets/js/56.4a323b8d.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.52920a53.js" as="script">
<link rel="preload" href="/assets/js/17896441.47f4e99e.js" as="script">
<link rel="preload" href="/assets/js/f984984d.0ce42ca1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.buildbuddy.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://docs.buildbuddy.io/docs/introduction/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs</a><a href="https://buildbuddy.io/faq" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">FAQs</a><a href="https://github.com/buildbuddy-io/buildbuddy" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a></div><div class="navbar__items navbar__items--right"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="sign-up">Sign Up</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT"> </span></div><div class="react-toggle-track-x"><span class="toggle_71bT"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.buildbuddy.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://docs.buildbuddy.io/docs/introduction/" target="_blank" rel="noopener noreferrer" class="menu__link">Docs</a></li><li class="menu__list-item"><a href="https://buildbuddy.io/faq" target="_self" rel="noopener noreferrer" class="menu__link">FAQs</a></li><li class="menu__list-item"><a href="https://github.com/buildbuddy-io/buildbuddy" target="_self" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="menu__link">Pricing</a></li><li class="menu__list-item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="menu__link">Login</a></li><li class="menu__list-item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="menu__link" class="sign-up">Sign Up</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cloud">Cloud Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/on-prem">On-prem Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides">Guides</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-auth">Authentication Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-metadata">Build Metadata Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Remote Build Execution</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/remote-build-execution">Remote Build Execution</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-setup">Remote Build Execution Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-platforms">RBE Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-github-actions">RBE with GitHub Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-pools">RBE Executor Pools</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting-rbe">RBE Failures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting-slow-upload">Slow Uploads</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Enterprise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise">BuildBuddy Enterprise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise-setup">Enterprise On-prem Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise-config">Enterprise Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise-helm">Enterprise Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise-rbe">Enterprise RBE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise-mac-rbe">Enterprise Mac RBE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enterprise-api">Enterprise API</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/prometheus-metrics">Prometheus Metrics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-samples">Samples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-app">App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-database">Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-ssl">SSL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-auth">Auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-integrations">Integrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-org">Org</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-rbe">RBE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-misc">Misc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-telemetry">Telemetry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-flags">Flags</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Prometheus Metrics</h1></header><div class="markdown"><p>BuildBuddy exposes <a href="https://prometheus.io" target="_blank" rel="noopener noreferrer">Prometheus</a> metrics that allow monitoring the
<a href="https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/" target="_blank" rel="noopener noreferrer">four golden signals</a>:
latency, traffic, errors, and saturation.</p><p>To view these metrics in a live-updating dashboard, we recommend using a tool
like <a href="https://grafana.com" target="_blank" rel="noopener noreferrer">Grafana</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="invocation-log-uploads"></a>Invocation log uploads<a class="hash-link" href="#invocation-log-uploads" title="Direct link to heading">#</a></h2><p>All invocation metrics are recorded at the <em>end</em> of each invocation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_invocation_count-counter"></a><strong><code>buildbuddy_invocation_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_invocation_count-counter" title="Direct link to heading">#</a></h3><p>The total number of invocations whose logs were uploaded to BuildBuddy.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels"></a>Labels<a class="hash-link" href="#labels" title="Direct link to heading">#</a></h4><ul><li><strong>invocation_status</strong>: Invocation status: <code>success</code>, <code>failure</code>, <code>disconnected</code>, or <code>unknown</code>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Number of invocations per second by invocation status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum by (invocation_status) (rate(buildbuddy_invocation_count[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Invocation success rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_invocation_count{invocation_status=&quot;success&quot;}[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_invocation_count[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_invocation_duration_usec-histogram"></a><strong><code>buildbuddy_invocation_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_invocation_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>The total duration of each invocation, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-1"></a>Labels<a class="hash-link" href="#labels-1" title="Direct link to heading">#</a></h4><ul><li><strong>invocation_status</strong>: Invocation status: <code>success</code>, <code>failure</code>, <code>disconnected</code>, or <code>unknown</code>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-1"></a>Examples<a class="hash-link" href="#examples-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median invocation duration in the past 5 minutes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum(rate(buildbuddy_invocation_duration_usec_bucket[5m])) by (le)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_invocation_build_event_count-counter"></a><strong><code>buildbuddy_invocation_build_event_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_invocation_build_event_count-counter" title="Direct link to heading">#</a></h3><p>Number of <a href="https://docs.bazel.build/versions/master/build-event-protocol.html" target="_blank" rel="noopener noreferrer">build events</a> uploaded to BuildBuddy.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-2"></a>Labels<a class="hash-link" href="#labels-2" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-2"></a>Examples<a class="hash-link" href="#examples-2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Build events uploaded per second</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_invocation_build_event_count[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Approximate error rate of build event upload handler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_invocation_build_event_count{status=&quot;0&quot;}[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_invocation_build_event_count[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="remote-cache-metrics"></a>Remote cache metrics<a class="hash-link" href="#remote-cache-metrics" title="Direct link to heading">#</a></h2><p>NOTE: Cache metrics are recorded at the end of each invocation,
which means that these metrics provide <em>approximate</em> real-time signals.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_cache_events-counter"></a><strong><code>buildbuddy_remote_cache_events</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_remote_cache_events-counter" title="Direct link to heading">#</a></h3><p>Number of cache events handled.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-3"></a>Labels<a class="hash-link" href="#labels-3" title="Direct link to heading">#</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>cache_event_type</strong>: Cache event type: <code>hit</code>, <code>miss</code>, or <code>upload</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_cache_download_size_bytes-histogram"></a><strong><code>buildbuddy_remote_cache_download_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_cache_download_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Number of bytes downloaded from the remote cache in each download.</p><p>Use the <strong><code>_sum</code></strong> suffix to get the total downloaded bytes and the <strong><code>_count</code></strong> suffix to get the number of downloaded files.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-4"></a>Labels<a class="hash-link" href="#labels-4" title="Direct link to heading">#</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-3"></a>Examples<a class="hash-link" href="#examples-3" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Cache download rate (bytes per second)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_cache_download_size_bytes_sum[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_cache_download_duration_usec-histogram"></a><strong><code>buildbuddy_remote_cache_download_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_cache_download_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Download duration for each file downloaded from the remote cache, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-5"></a>Labels<a class="hash-link" href="#labels-5" title="Direct link to heading">#</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-4"></a>Examples<a class="hash-link" href="#examples-4" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median download duration for content-addressable store (CAS)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum(rate(buildbuddy_remote_cache_download_duration_usec{cache_type=&quot;cas&quot;}[5m])) by (le)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_cache_upload_size_bytes-histogram"></a><strong><code>buildbuddy_remote_cache_upload_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_cache_upload_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Number of bytes uploaded to the remote cache in each upload.</p><p>Use the <strong><code>_sum</code></strong> suffix to get the total uploaded bytes and the <strong><code>_count</code></strong> suffix to get the number of uploaded files.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-6"></a>Labels<a class="hash-link" href="#labels-6" title="Direct link to heading">#</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-5"></a>Examples<a class="hash-link" href="#examples-5" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Cache upload rate (bytes per second)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_cache_upload_size_bytes_sum[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_cache_upload_duration_usec-histogram"></a><strong><code>buildbuddy_remote_cache_upload_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_cache_upload_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Upload duration for each file uploaded to the remote cache, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-7"></a>Labels<a class="hash-link" href="#labels-7" title="Direct link to heading">#</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-6"></a>Examples<a class="hash-link" href="#examples-6" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median upload duration for content-addressable store (CAS)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum(rate(buildbuddy_remote_cache_upload_duration_usec{cache_type=&quot;cas&quot;}[5m])) by (le)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="remote-execution-metrics"></a>Remote execution metrics<a class="hash-link" href="#remote-execution-metrics" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_count-counter"></a><strong><code>buildbuddy_remote_execution_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_remote_execution_count-counter" title="Direct link to heading">#</a></h3><p>Number of actions executed remotely.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-8"></a>Labels<a class="hash-link" href="#labels-8" title="Direct link to heading">#</a></h4><ul><li><strong>exit_code</strong>: Process exit code of an executed action.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-7"></a>Examples<a class="hash-link" href="#examples-7" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Total number of actions executed per second</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_remote_execution_count[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram"></a><strong><code>buildbuddy_remote_execution_executed_action_metadata_durations_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram" title="Direct link to heading">#</a></h3><p>Time spent in each stage of action execution, in <strong>microseconds</strong>.</p><p>Queries should filter or group by the <code>stage</code> label, taking care not to aggregate different stages.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-9"></a>Labels<a class="hash-link" href="#labels-9" title="Direct link to heading">#</a></h4><ul><li><strong>stage</strong>: Command provided to the Bazel daemon: <code>run</code>, <code>test</code>, <code>build</code>, <code>coverage</code>, <code>mobile-install</code>, ... Executed action stage. Action execution is split into stages corresponding to the timestamps defined in <a href="https://github.com/buildbuddy-io/buildbuddy/blob/fb2e3a74083d82797926654409dc3858089d260b/proto/remote_execution.proto#L797" target="_blank" rel="noopener noreferrer"><code>ExecutedActionMetadata</code></a>: <code>queued</code>, <code>input_fetch</code>, <code>execution</code>, and <code>output_upload</code>. An additional stage, <code>worker</code>, includes all stages during which a worker is handling the action, which is all stages except the <code>queued</code> stage.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-8"></a>Examples<a class="hash-link" href="#examples-8" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median duration of all command stages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum(rate(buildbuddy_remote_execution_executed_action_metadata_durations_usec_bucket[5m])) by (le, stage)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># p90 duration of just the command execution stage</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum(rate(buildbuddy_remote_execution_executed_action_metadata_durations_usec_bucket{stage=&quot;execution&quot;}[5m])) by (le)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_queue_length-gauge"></a><strong><code>buildbuddy_remote_execution_queue_length</code></strong> (Gauge)<a class="hash-link" href="#buildbuddy_remote_execution_queue_length-gauge" title="Direct link to heading">#</a></h3><p>Number of actions currently waiting in the executor queue.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-9"></a>Examples<a class="hash-link" href="#examples-9" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median queue length across all executors</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">quantile(0.5, buildbuddy_remote_execution_queue_length)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_tasks_executing-gauge"></a><strong><code>buildbuddy_remote_execution_tasks_executing</code></strong> (Gauge)<a class="hash-link" href="#buildbuddy_remote_execution_tasks_executing-gauge" title="Direct link to heading">#</a></h3><p>Number of tasks currently being executed by the executor.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-10"></a>Examples<a class="hash-link" href="#examples-10" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Fraction of idle executors</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">count_values(0, buildbuddy_remote_execution_tasks_executing)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">count(buildbuddy_remote_execution_tasks_executing)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_assigned_ram_bytes-gauge"></a><strong><code>buildbuddy_remote_execution_assigned_ram_bytes</code></strong> (Gauge)<a class="hash-link" href="#buildbuddy_remote_execution_assigned_ram_bytes-gauge" title="Direct link to heading">#</a></h3><p>Estimated RAM on the executor that is currently allocated for task execution, in <strong>bytes</strong>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_assigned_milli_cpu-gauge"></a><strong><code>buildbuddy_remote_execution_assigned_milli_cpu</code></strong> (Gauge)<a class="hash-link" href="#buildbuddy_remote_execution_assigned_milli_cpu-gauge" title="Direct link to heading">#</a></h3><p>Estimated CPU time on the executor that is currently allocated for task execution, in Kubernetes milliCPU.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-11"></a>Examples<a class="hash-link" href="#examples-11" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Average CPU allocated to tasks (average is computed across executor instances).</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># `label_replace` is needed because we export k8s pod name as &quot;pod_name&quot; in Prometheus,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># while k8s exports it as &quot;pod&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">avg(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  buildbuddy_remote_execution_used_milli_cpu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  on (pod_name) (label_replace(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kube_pod_container_resource_limits_cpu_cores{pod=~&quot;executor-.*&quot;},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;pod_name&quot;, &quot;$1&quot;, &quot;pod&quot;, &quot;(.*)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) * 1000 * 0.6)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_file_download_count-histogram"></a><strong><code>buildbuddy_remote_execution_file_download_count</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_file_download_count-histogram" title="Direct link to heading">#</a></h3><p>Number of files downloaded during remote execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_file_download_size_bytes-histogram"></a><strong><code>buildbuddy_remote_execution_file_download_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_file_download_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Total number of bytes downloaded during remote execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_file_download_duration_usec-histogram"></a><strong><code>buildbuddy_remote_execution_file_download_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_file_download_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Per-file download duration during remote execution, in <strong>microseconds</strong>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_file_upload_count-histogram"></a><strong><code>buildbuddy_remote_execution_file_upload_count</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_file_upload_count-histogram" title="Direct link to heading">#</a></h3><p>Number of files uploaded during remote execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_file_upload_size_bytes-histogram"></a><strong><code>buildbuddy_remote_execution_file_upload_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_file_upload_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Total number of bytes uploaded during remote execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_remote_execution_file_upload_duration_usec-histogram"></a><strong><code>buildbuddy_remote_execution_file_upload_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_remote_execution_file_upload_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Per-file upload duration during remote execution, in <strong>microseconds</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="blobstore-metrics"></a>Blobstore metrics<a class="hash-link" href="#blobstore-metrics" title="Direct link to heading">#</a></h2><p>&quot;Blobstore&quot; refers to the backing storage that BuildBuddy uses to
store objects in the cache, as well as certain pieces of temporary
data (such as invocation events while an invocation is in progress).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_read_count-counter"></a><strong><code>buildbuddy_blobstore_read_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_blobstore_read_count-counter" title="Direct link to heading">#</a></h3><p>Number of files read from the blobstore.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-10"></a>Labels<a class="hash-link" href="#labels-10" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_read_size_bytes-histogram"></a><strong><code>buildbuddy_blobstore_read_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_blobstore_read_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Number of bytes read from the blobstore per file.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-11"></a>Labels<a class="hash-link" href="#labels-11" title="Direct link to heading">#</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Bytes downloaded per second</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_blobstore_read_size_bytes[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_read_duration_usec-histogram"></a><strong><code>buildbuddy_blobstore_read_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_blobstore_read_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Duration per blobstore file read, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-12"></a>Labels<a class="hash-link" href="#labels-12" title="Direct link to heading">#</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_write_count-counter"></a><strong><code>buildbuddy_blobstore_write_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_blobstore_write_count-counter" title="Direct link to heading">#</a></h3><p>Number of files written to the blobstore.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-13"></a>Labels<a class="hash-link" href="#labels-13" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Bytes uploaded per second</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_blobstore_write_size_bytes[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_write_size_bytes-histogram"></a><strong><code>buildbuddy_blobstore_write_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_blobstore_write_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Number of bytes written to the blobstore per file.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-14"></a>Labels<a class="hash-link" href="#labels-14" title="Direct link to heading">#</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_write_duration_usec-histogram"></a><strong><code>buildbuddy_blobstore_write_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_blobstore_write_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Duration per blobstore file write, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-15"></a>Labels<a class="hash-link" href="#labels-15" title="Direct link to heading">#</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_delete_count-counter"></a><strong><code>buildbuddy_blobstore_delete_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_blobstore_delete_count-counter" title="Direct link to heading">#</a></h3><p>Number of files deleted from the blobstore.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-16"></a>Labels<a class="hash-link" href="#labels-16" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_blobstore_delete_duration_usec-histogram"></a><strong><code>buildbuddy_blobstore_delete_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_blobstore_delete_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Delete duration per blobstore file deletion, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-17"></a>Labels<a class="hash-link" href="#labels-17" title="Direct link to heading">#</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sql-metrics"></a>SQL metrics<a class="hash-link" href="#sql-metrics" title="Direct link to heading">#</a></h1><p>The following metrics are for monitoring the SQL database configured
for BuildBuddy.</p><p>If you&#x27;d like to see an up-to-date catalog of what BuildBuddy stores in
its SQL database, see the table definitions <a href="https://github.com/buildbuddy-io/buildbuddy/blob/master/server/tables/tables.go" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="query--error-rate-metrics"></a>Query / error rate metrics<a class="hash-link" href="#query--error-rate-metrics" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_query_count-counter"></a><strong><code>buildbuddy_sql_query_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_query_count-counter" title="Direct link to heading">#</a></h3><p>Number of SQL queries executed.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-18"></a>Labels<a class="hash-link" href="#labels-18" title="Direct link to heading">#</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-12"></a>Examples<a class="hash-link" href="#examples-12" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># SQL queries per second (by query template).</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum by (sql_query_template) (rate(buildbuddy_sql_query_count[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_query_duration_usec-histogram"></a><strong><code>buildbuddy_sql_query_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_sql_query_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>SQL query duration, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-19"></a>Labels<a class="hash-link" href="#labels-19" title="Direct link to heading">#</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-13"></a>Examples<a class="hash-link" href="#examples-13" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median SQL query duration</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum(rate(buildbuddy_sql_query_duration_usec_bucket[5m])) by (le)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_error_count-counter"></a><strong><code>buildbuddy_sql_error_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_error_count-counter" title="Direct link to heading">#</a></h3><p>Number of SQL queries that resulted in an error.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-20"></a>Labels<a class="hash-link" href="#labels-20" title="Direct link to heading">#</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-14"></a>Examples<a class="hash-link" href="#examples-14" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># SQL error rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_sql_error_count[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_sql_query_count[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="databasesql-metrics"></a><code>database/sql</code> metrics<a class="hash-link" href="#databasesql-metrics" title="Direct link to heading">#</a></h2><p>The following metrics directly expose
<a href="https://golang.org/pkg/database/sql/#DBStats" target="_blank" rel="noopener noreferrer">DBStats</a> from the
<code>database/sql</code> Go package.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_max_open_connections-gauge"></a><strong><code>buildbuddy_sql_max_open_connections</code></strong> (Gauge)<a class="hash-link" href="#buildbuddy_sql_max_open_connections-gauge" title="Direct link to heading">#</a></h3><p>Maximum number of open connections to the database.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-21"></a>Labels<a class="hash-link" href="#labels-21" title="Direct link to heading">#</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_open_connections-gauge"></a><strong><code>buildbuddy_sql_open_connections</code></strong> (Gauge)<a class="hash-link" href="#buildbuddy_sql_open_connections-gauge" title="Direct link to heading">#</a></h3><p>The number of established connections to the database.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-22"></a>Labels<a class="hash-link" href="#labels-22" title="Direct link to heading">#</a></h4><ul><li><strong>connection_status</strong>: Status of the database connection: <code>in_use</code> or <code>idle</code></li><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_wait_count-counter"></a><strong><code>buildbuddy_sql_wait_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_wait_count-counter" title="Direct link to heading">#</a></h3><p>The total number of connections waited for.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-23"></a>Labels<a class="hash-link" href="#labels-23" title="Direct link to heading">#</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_wait_duration_usec-counter"></a><strong><code>buildbuddy_sql_wait_duration_usec</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_wait_duration_usec-counter" title="Direct link to heading">#</a></h3><p>The total time blocked waiting for a new connection, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-24"></a>Labels<a class="hash-link" href="#labels-24" title="Direct link to heading">#</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_max_idle_closed-counter"></a><strong><code>buildbuddy_sql_max_idle_closed</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_max_idle_closed-counter" title="Direct link to heading">#</a></h3><p>The total number of connections closed due to SetMaxIdleConns.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-25"></a>Labels<a class="hash-link" href="#labels-25" title="Direct link to heading">#</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_max_idle_time_closed-counter"></a><strong><code>buildbuddy_sql_max_idle_time_closed</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_max_idle_time_closed-counter" title="Direct link to heading">#</a></h3><p>The total number of connections closed due to SetConnMaxIdleTime.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-26"></a>Labels<a class="hash-link" href="#labels-26" title="Direct link to heading">#</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_sql_max_lifetime_closed-counter"></a><strong><code>buildbuddy_sql_max_lifetime_closed</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_sql_max_lifetime_closed-counter" title="Direct link to heading">#</a></h3><p>The total number of connections closed due to SetConnMaxLifetime.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-27"></a>Labels<a class="hash-link" href="#labels-27" title="Direct link to heading">#</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="http-metrics"></a>HTTP metrics<a class="hash-link" href="#http-metrics" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_http_request_count-counter"></a><strong><code>buildbuddy_http_request_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_http_request_count-counter" title="Direct link to heading">#</a></h3><p>HTTP request count.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-28"></a>Labels<a class="hash-link" href="#labels-28" title="Direct link to heading">#</a></h4><ul><li><strong>route</strong>: HTTP route before substituting path parameters (<code>/invocation/:id</code>, <code>/settings</code>, ...)</li><li><strong>method</strong>: HTTP method: <code>GET</code>, <code>POST</code>, ...</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-15"></a>Examples<a class="hash-link" href="#examples-15" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Requests per second, by status code</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum by (code) (rate(buildbuddy_http_request_count[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 5xx error ratio</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_http_request_count{code=~&quot;5..&quot;}[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum(rate(buildbuddy_http_request_count[5m]))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_http_request_handler_duration_usec-histogram"></a><strong><code>buildbuddy_http_request_handler_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_http_request_handler_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Time taken to handle each HTTP request in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-29"></a>Labels<a class="hash-link" href="#labels-29" title="Direct link to heading">#</a></h4><ul><li><strong>route</strong>: HTTP route before substituting path parameters (<code>/invocation/:id</code>, <code>/settings</code>, ...)</li><li><strong>method</strong>: HTTP method: <code>GET</code>, <code>POST</code>, ...</li><li><strong>code</strong>: HTTP response code: <code>200</code>, <code>302</code>, <code>401</code>, <code>404</code>, <code>500</code>, ...</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-16"></a>Examples<a class="hash-link" href="#examples-16" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median request duration for successfuly processed (2xx) requests.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Other status codes may be associated with early-exits and are</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># likely to add too much noise.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum by (le)   (rate(buildbuddy_http_request_handler_duration_usec{code=~&quot;2..&quot;}[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_http_response_size_bytes-histogram"></a><strong><code>buildbuddy_http_response_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_http_response_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Response size of each HTTP response in <strong>bytes</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-30"></a>Labels<a class="hash-link" href="#labels-30" title="Direct link to heading">#</a></h4><ul><li><strong>route</strong>: HTTP route before substituting path parameters (<code>/invocation/:id</code>, <code>/settings</code>, ...)</li><li><strong>method</strong>: HTTP method: <code>GET</code>, <code>POST</code>, ...</li><li><strong>code</strong>: HTTP response code: <code>200</code>, <code>302</code>, <code>401</code>, <code>404</code>, <code>500</code>, ...</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples-17"></a>Examples<a class="hash-link" href="#examples-17" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly promql"><div tabindex="0" class="prism-code language-promql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Median HTTP response size</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">histogram_quantile(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  0.5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  sum by (le)   (rate(buildbuddy_http_response_size_bytes[5m]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="internal-metrics"></a>Internal metrics<a class="hash-link" href="#internal-metrics" title="Direct link to heading">#</a></h2><p>These metrics are for monitoring lower-level subsystems of BuildBuddy.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="build-event-handler"></a>Build event handler<a class="hash-link" href="#build-event-handler" title="Direct link to heading">#</a></h3><p>The build event handler logs all build events uploaded to BuildBuddy
as part of the Build Event Protocol.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_build_event_handler_duration_usec-histogram"></a><strong><code>buildbuddy_build_event_handler_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_build_event_handler_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>The time spent handling each build event in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-31"></a>Labels<a class="hash-link" href="#labels-31" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cache"></a>Cache<a class="hash-link" href="#cache" title="Direct link to heading">#</a></h3><p>&quot;Cache&quot; refers to the cache backend(s) that BuildBuddy uses to
accelerate file IO operations, which are common in different
subsystems such as the remote cache and the fetch server (for
downloading invocation artifacts).</p><p>BuildBuddy can be configured to use multiple layers of caching
(an in-memory layer, coupled with a cloud storage layer).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get-metrics"></a><code>get</code> metrics<a class="hash-link" href="#get-metrics" title="Direct link to heading">#</a></h4><p><code>get</code> metrics track non-streamed cache reads (all data is fetched
from the cache in a single request).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_get_count-counter"></a><strong><code>buildbuddy_cache_get_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_cache_get_count-counter" title="Direct link to heading">#</a></h3><p>Number of cache get requests.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-32"></a>Labels<a class="hash-link" href="#labels-32" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_get_duration_usec-histogram"></a><strong><code>buildbuddy_cache_get_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_get_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>The time spent retrieving each entry from the cache, in <strong>microseconds</strong>.</p><p>This is recorded only for successful gets.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-33"></a>Labels<a class="hash-link" href="#labels-33" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_get_size_bytes-histogram"></a><strong><code>buildbuddy_cache_get_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_get_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Size of each entry retrieved from the cache, in <strong>bytes</strong>.</p><p>This is recorded only for successful gets.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-34"></a>Labels<a class="hash-link" href="#labels-34" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="read-metrics"></a><code>read</code> metrics<a class="hash-link" href="#read-metrics" title="Direct link to heading">#</a></h4><p><code>read</code> metrics track streamed cache reads.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_read_count-counter"></a><strong><code>buildbuddy_cache_read_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_cache_read_count-counter" title="Direct link to heading">#</a></h3><p>Number of streamed cache reads started.</p><p>This is incremented once for each started stream, <strong>not</strong> for each chunk in the stream.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-35"></a>Labels<a class="hash-link" href="#labels-35" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_read_duration_usec-histogram"></a><strong><code>buildbuddy_cache_read_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_read_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>The total time spent for each read stream, in <strong>microseconds</strong>.</p><p>This is recorded only for successful reads, and measures the entire read stream (not just individual chunks).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-36"></a>Labels<a class="hash-link" href="#labels-36" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_read_size_bytes-histogram"></a><strong><code>buildbuddy_cache_read_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_read_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Total size of each entry retrieved from the cache via streaming, in <strong>bytes</strong>.</p><p>This is recorded only on success, and measures the entire stream (not just individual chunks).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-37"></a>Labels<a class="hash-link" href="#labels-37" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="set-metrics"></a><code>set</code> metrics<a class="hash-link" href="#set-metrics" title="Direct link to heading">#</a></h4><p><code>set</code> metrics track non-streamed cache writes (all data is wrtiten
in a single request).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_set_count-counter"></a><strong><code>buildbuddy_cache_set_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_cache_set_count-counter" title="Direct link to heading">#</a></h3><p>Number of cache set requests.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-38"></a>Labels<a class="hash-link" href="#labels-38" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_set_duration_usec-histogram"></a><strong><code>buildbuddy_cache_set_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_set_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>The time spent writing each entry to the cache, in <strong>microseconds</strong>.</p><p>This is recorded only for successful sets.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-39"></a>Labels<a class="hash-link" href="#labels-39" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_set_size_bytes-histogram"></a><strong><code>buildbuddy_cache_set_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_set_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Size of the value stored in each set operation, in <strong>bytes</strong>.</p><p>This is recorded only for successful sets.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-40"></a>Labels<a class="hash-link" href="#labels-40" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_set_retries-histogram"></a><strong><code>buildbuddy_cache_set_retries</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_set_retries-histogram" title="Direct link to heading">#</a></h3><p>Number of retries required to fulfill the set request (an observed value of 0 means the transfer succeeded on the first try).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-41"></a>Labels<a class="hash-link" href="#labels-41" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="write-metrics"></a><code>write</code> metrics<a class="hash-link" href="#write-metrics" title="Direct link to heading">#</a></h4><p><code>write</code> metrics track streamed cache writes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_write_count-counter"></a><strong><code>buildbuddy_cache_write_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_cache_write_count-counter" title="Direct link to heading">#</a></h3><p>Number of streamed cache writes started.</p><p>This is incremented once for each started stream, <strong>not</strong> for each chunk in the stream.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-42"></a>Labels<a class="hash-link" href="#labels-42" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_write_duration_usec-histogram"></a><strong><code>buildbuddy_cache_write_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_write_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>The time spent for each streamed write to the cache, in <strong>microseconds</strong>.</p><p>This is recorded only on success, and measures the entire stream (not just individual chunks).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-43"></a>Labels<a class="hash-link" href="#labels-43" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_write_size_bytes-histogram"></a><strong><code>buildbuddy_cache_write_size_bytes</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_write_size_bytes-histogram" title="Direct link to heading">#</a></h3><p>Size of each entry written to the cache via streaming, in <strong>bytes</strong>.</p><p>This is recorded only on success, and measures the entire stream (not just individual chunks).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-44"></a>Labels<a class="hash-link" href="#labels-44" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_write_retries-histogram"></a><strong><code>buildbuddy_cache_write_retries</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_write_retries-histogram" title="Direct link to heading">#</a></h3><p>Number of retries required to write each chunk in the stream (an observed value of 0 means the transfer succeeded on the first try).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-45"></a>Labels<a class="hash-link" href="#labels-45" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="other-cache-metrics"></a>Other cache metrics<a class="hash-link" href="#other-cache-metrics" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_delete_count-counter"></a><strong><code>buildbuddy_cache_delete_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_cache_delete_count-counter" title="Direct link to heading">#</a></h3><p>Number of deletes from the cache.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-46"></a>Labels<a class="hash-link" href="#labels-46" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_delete_duration_usec-histogram"></a><strong><code>buildbuddy_cache_delete_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_delete_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Duration of each cache deletion, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-47"></a>Labels<a class="hash-link" href="#labels-47" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_contains_count-counter"></a><strong><code>buildbuddy_cache_contains_count</code></strong> (Counter)<a class="hash-link" href="#buildbuddy_cache_contains_count-counter" title="Direct link to heading">#</a></h3><p>Number of <code>contains(key)</code> requests made to the cache.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-48"></a>Labels<a class="hash-link" href="#labels-48" title="Direct link to heading">#</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_contains_duration_usec-histogram"></a><strong><code>buildbuddy_cache_contains_duration_usec</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_contains_duration_usec-histogram" title="Direct link to heading">#</a></h3><p>Duration of each each <code>contains(key)</code> request, in <strong>microseconds</strong>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-49"></a>Labels<a class="hash-link" href="#labels-49" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="buildbuddy_cache_contains_retry_count-histogram"></a><strong><code>buildbuddy_cache_contains_retry_count</code></strong> (Histogram)<a class="hash-link" href="#buildbuddy_cache_contains_retry_count-histogram" title="Direct link to heading">#</a></h3><p>Number of retries required to fulfill each <code>contains(key)</code> request to the cache (an observed value of 0 means the request succeeded on the first try).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="labels-50"></a>Labels<a class="hash-link" href="#labels-50" title="Direct link to heading">#</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/prometheus-metrics.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/enterprise-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« API Documentation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuring BuildBuddy »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#invocation-log-uploads" class="table-of-contents__link">Invocation log uploads</a><ul><li><a href="#buildbuddy_invocation_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_invocation_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_invocation_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_invocation_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_invocation_build_event_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_invocation_build_event_count</code></strong> (Counter)</a></li></ul></li><li><a href="#remote-cache-metrics" class="table-of-contents__link">Remote cache metrics</a><ul><li><a href="#buildbuddy_remote_cache_events-counter" class="table-of-contents__link"><strong><code>buildbuddy_remote_cache_events</code></strong> (Counter)</a></li><li><a href="#buildbuddy_remote_cache_download_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_cache_download_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_cache_download_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_cache_download_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_cache_upload_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_cache_upload_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_cache_upload_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_cache_upload_duration_usec</code></strong> (Histogram)</a></li></ul></li><li><a href="#remote-execution-metrics" class="table-of-contents__link">Remote execution metrics</a><ul><li><a href="#buildbuddy_remote_execution_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_executed_action_metadata_durations_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_execution_queue_length-gauge" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_queue_length</code></strong> (Gauge)</a></li><li><a href="#buildbuddy_remote_execution_tasks_executing-gauge" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_tasks_executing</code></strong> (Gauge)</a></li><li><a href="#buildbuddy_remote_execution_assigned_ram_bytes-gauge" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_assigned_ram_bytes</code></strong> (Gauge)</a></li><li><a href="#buildbuddy_remote_execution_assigned_milli_cpu-gauge" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_assigned_milli_cpu</code></strong> (Gauge)</a></li><li><a href="#buildbuddy_remote_execution_file_download_count-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_file_download_count</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_execution_file_download_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_file_download_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_execution_file_download_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_file_download_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_execution_file_upload_count-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_file_upload_count</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_execution_file_upload_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_file_upload_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_remote_execution_file_upload_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_remote_execution_file_upload_duration_usec</code></strong> (Histogram)</a></li></ul></li><li><a href="#blobstore-metrics" class="table-of-contents__link">Blobstore metrics</a><ul><li><a href="#buildbuddy_blobstore_read_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_read_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_blobstore_read_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_read_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_blobstore_read_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_read_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_blobstore_write_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_write_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_blobstore_write_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_write_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_blobstore_write_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_write_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_blobstore_delete_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_delete_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_blobstore_delete_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_blobstore_delete_duration_usec</code></strong> (Histogram)</a></li></ul></li><li><a href="#query--error-rate-metrics" class="table-of-contents__link">Query / error rate metrics</a><ul><li><a href="#buildbuddy_sql_query_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_query_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_sql_query_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_sql_query_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_sql_error_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_error_count</code></strong> (Counter)</a></li></ul></li><li><a href="#databasesql-metrics" class="table-of-contents__link"><code>database/sql</code> metrics</a><ul><li><a href="#buildbuddy_sql_max_open_connections-gauge" class="table-of-contents__link"><strong><code>buildbuddy_sql_max_open_connections</code></strong> (Gauge)</a></li><li><a href="#buildbuddy_sql_open_connections-gauge" class="table-of-contents__link"><strong><code>buildbuddy_sql_open_connections</code></strong> (Gauge)</a></li><li><a href="#buildbuddy_sql_wait_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_wait_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_sql_wait_duration_usec-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_wait_duration_usec</code></strong> (Counter)</a></li><li><a href="#buildbuddy_sql_max_idle_closed-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_max_idle_closed</code></strong> (Counter)</a></li><li><a href="#buildbuddy_sql_max_idle_time_closed-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_max_idle_time_closed</code></strong> (Counter)</a></li><li><a href="#buildbuddy_sql_max_lifetime_closed-counter" class="table-of-contents__link"><strong><code>buildbuddy_sql_max_lifetime_closed</code></strong> (Counter)</a></li></ul></li><li><a href="#http-metrics" class="table-of-contents__link">HTTP metrics</a><ul><li><a href="#buildbuddy_http_request_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_http_request_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_http_request_handler_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_http_request_handler_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_http_response_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_http_response_size_bytes</code></strong> (Histogram)</a></li></ul></li><li><a href="#internal-metrics" class="table-of-contents__link">Internal metrics</a><ul><li><a href="#build-event-handler" class="table-of-contents__link">Build event handler</a></li><li><a href="#buildbuddy_build_event_handler_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_build_event_handler_duration_usec</code></strong> (Histogram)</a></li><li><a href="#cache" class="table-of-contents__link">Cache</a></li><li><a href="#buildbuddy_cache_get_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_cache_get_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_cache_get_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_get_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_get_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_get_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_read_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_cache_read_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_cache_read_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_read_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_read_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_read_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_set_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_cache_set_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_cache_set_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_set_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_set_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_set_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_set_retries-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_set_retries</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_write_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_cache_write_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_cache_write_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_write_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_write_size_bytes-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_write_size_bytes</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_write_retries-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_write_retries</code></strong> (Histogram)</a></li><li><a href="#other-cache-metrics" class="table-of-contents__link">Other cache metrics</a></li><li><a href="#buildbuddy_cache_delete_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_cache_delete_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_cache_delete_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_delete_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_contains_count-counter" class="table-of-contents__link"><strong><code>buildbuddy_cache_contains_count</code></strong> (Counter)</a></li><li><a href="#buildbuddy_cache_contains_duration_usec-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_contains_duration_usec</code></strong> (Histogram)</a></li><li><a href="#buildbuddy_cache_contains_retry_count-histogram" class="table-of-contents__link"><strong><code>buildbuddy_cache_contains_retry_count</code></strong> (Histogram)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.buildbuddy.io/"><img src="/img/logo_white.svg" class="footer-logo"></a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Product</h4><ul class="footer__items"><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Get Started</a></li><li class="footer__item"><a href="https://docs.buildbuddy.io/docs/introduction/" target="_self" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="footer__link-item">Pricing</a></li><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Login</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/privacy" target="_self" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/terms" target="_self" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.buildbuddy.io/blog/" target="_self" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io/buildbuddy/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report an Issue</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/contact" target="_self" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/team" target="_self" rel="noopener noreferrer" class="footer__link-item">Our Team</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/careers" target="_self" rel="noopener noreferrer" class="footer__link-item">Careers</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Security</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.buildbuddy.io/security" target="_self" rel="noopener noreferrer" class="footer__link-item">Security Overview</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/security-updates" target="_self" rel="noopener noreferrer" class="footer__link-item">Security Updates</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/security-vulnerability-report" target="_self" rel="noopener noreferrer" class="footer__link-item">Report a Vulnerability</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Connect</h4><ul class="footer__items"><li class="footer__item"><a href="http://slack.buildbuddy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/buildbuddy_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="http://linkedin.com/company/buildbuddy" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2021 Iteration, Inc.</div></div></div></footer></div>
<script src="/assets/js/styles.99ff62e2.js"></script>
<script src="/assets/js/runtime~main.fb523e5f.js"></script>
<script src="/assets/js/main.6a7acce9.js"></script>
<script src="/assets/js/1.af4f1695.js"></script>
<script src="/assets/js/2.188d4042.js"></script>
<script src="/assets/js/3.98ab277b.js"></script>
<script src="/assets/js/1be78505.31ec347f.js"></script>
<script src="/assets/js/56.4a323b8d.js"></script>
<script src="/assets/js/935f2afb.52920a53.js"></script>
<script src="/assets/js/17896441.47f4e99e.js"></script>
<script src="/assets/js/f984984d.0ce42ca1.js"></script>
</body>
</html>